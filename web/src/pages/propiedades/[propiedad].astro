---
import GalleryProperties from "../../components/GalleryProperties.astro";
import Layout from "../../layouts/Layout.astro";
import {getTotalPropiedades, singleHouse } from "../../utils/getStrapiInfo.ts";
const StrapiURL = import.meta.env.PUBLIC_STRAPI_URL
console.log(StrapiURL);

export async function getStaticPaths() {
  const propiedades = await getTotalPropiedades();
  
  return propiedades.data.map((propiedad) => ({
        params: {
          propiedad: propiedad.Titulo,
        },
      }
    )
  ) 

} 

// Obtener el parámetro dinámico de la URL
const { propiedad } = Astro.params;

const dataPropiedad = await singleHouse(propiedad);
console.log('valores',dataPropiedad);

---
<Layout>
  <main class="mt-20 max-w-7xl mx-auto p-2">
    <div><!-- Encabezado -->
      <h1 class="text-6xl text-primary font-bold">{dataPropiedad.Titulo}</h1>
      <span class="text-3xl text-secondary mt-6">B/.{dataPropiedad.Precio}</span>
    </div>

    <GalleryProperties Imagenes={dataPropiedad.Imagenes} />

    <!-- <div class="grid grid-cols-6 grid-rows-6 gap-3">
      <div class="col-span-2 row-span-4 rounded-2xl h-full overflow-hidden">
        <img src={StrapiURL+dataPropiedad.Imagenes[0].url} alt="">
      </div>
      <div class="col-span-4 row-span-2 col-start-3 rounded-2xl overflow-hidden">
        <img src={StrapiURL+dataPropiedad.Imagenes[0].url} class="w-full object-cover object-center max-h-[250px]" alt="">
      </div>
      <div class="col-span-2 row-span-2 col-start-3 row-start-3">
        <img src={StrapiURL+dataPropiedad.Imagenes[0].url} class="w-full object-cover object-center max-h-[250px]" alt="">
      </div>
      <div class="col-span-2 row-span-2 col-start-5 row-start-3">14</div>
      <div class="col-span-2 row-span-2 row-start-5">15</div>
      <div class="col-span-2 row-span-2 col-start-3 row-start-5">16</div>
      <div class="col-span-2 row-span-2 col-start-5 row-start-5">17</div>
    </div>  -->


    <div> <!-- Detalles -->

    </div>
  </main>
</Layout>