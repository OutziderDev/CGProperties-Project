---
import GalleryProperties from "../../components/GalleryProperties.astro";
import Layout from "../../layouts/Layout.astro";
import {getTotalPropiedades, singleHouse } from "../../utils/getStrapiInfo.ts";
const StrapiURL = import.meta.env.PUBLIC_STRAPI_URL
console.log(StrapiURL);

export async function getStaticPaths() {
  const propiedades = await getTotalPropiedades();
  
  return propiedades.data.map((propiedad) => ({
        params: {
          propiedad: propiedad.Titulo,
        },
      }
    )
  ) 

} 

// Obtener el parámetro dinámico de la URL
const { propiedad } = Astro.params;

const dataPropiedad = await singleHouse(propiedad);
console.log('valores',dataPropiedad);

---
<Layout>
  <main class="mt-20 max-w-7xl mx-auto p-2">
    <div><!-- Encabezado -->
      <h1 class="text-6xl text-primary font-bold">{dataPropiedad.Titulo}</h1>
      <span class="text-3xl text-secondary mt-6">B/.{dataPropiedad.Precio}</span>
    </div>

    <GalleryProperties Imagenes={dataPropiedad.Imagenes} />

    <div> <!-- Detalles -->

    </div>
  </main>
</Layout>